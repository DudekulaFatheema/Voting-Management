package com.voter.service;

import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.voter.entity.Voter;
import com.voter.repository.VoterRepository;

@Service
public class VoterServiceImpl  implements VoterService {

	
	@Autowired
	private VoterRepository voterRepository;
	
	@Override
	public Voter addVoter(Voter voter) throws Exception {
		Voter savedVoter = voterRepository.save(voter);
		if(savedVoter != null) {
			return savedVoter;
		}
		else
		return null;
	}

	

	@Override
	public String deleteVoter(int voterId) throws Exception {
		voterRepository.deleteById(voterId);
		return "voter with id "+voterId+" has deleted";
	}
	

	@Override
	public Voter updateVoter(Voter voter) throws Exception {
		Voter updatedVoter = voterRepository.save(voter);
		return updatedVoter;
	}

	@Override
	public List<Voter> getAllVoters() throws Exception {
		List<Voter> allVoters = voterRepository.findAll();
		return allVoters;
	}

	@Override
	public Voter registerVoter(Voter voter) throws NullUserFound, NullEmailFoundException {
		if(voter.getUserName() == null || voter.getUserName() == "") {
			throw new NullEmailFoundException("username id cannot be null");
		}
		
	else if (voter.getName().isEmpty() ||  voter.getUserName().isEmpty()
				|| voter.getPassWord().isEmpty()) {
			throw new NullUserFound("Error: Null value is not accepted.");
		}
		else if (voter.getName().equals("string") ||  voter.getPassWord().equals("string") || voter.getUserName().equals("string") ) {
			throw new NullUserFound("Error: Null value is not accepted.");
		}
		return voterRepository.save(voter);
	}
	

	@Override
	public Voter loginVoter(String userName, String password) throws NullUserFound {
		if(userName.equals("")|| userName.equals("string")|| password.equals("")|| password.equals("string")) {
			throw new NullUserFound("Email or Password Cannot be empty");
		}
			
		Voter v =  voterRepository.findVoterByUserNamePassword(userName, password);
		
		if(v == null) {
			throw new NullUserFound("Cant Login Parent Email and Password dont match");
		}
		
		return v;
	}
	}


